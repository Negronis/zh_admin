(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-632f98c3"],{"1ebe":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("Button",{ref:"button",staticStyle:{display:"none"},attrs:{id:"btn",type:"primary"},on:{click:e.test}},[e._v("销毁表格")]),e.showTable?a("vxe-grid",{ref:"xGrid",attrs:{border:"",resizable:"","highlight-hover-row":"","import-config":"","export-config":"","show-overflow":"tooltip","show-header-overflow":"tooltip","keep-source":"",height:e.Height-156+"px",align:"center","sort-config":{trigger:"cell"},"filter-config":{remote:!0},"form-config":e.tableForm,"pager-config":e.tablePage,toolbar:e.tableToolbar,"proxy-config":e.tableProxy,columns:e.tableColumn,"checkbox-config":{reserve:!0,highlight:!0,range:!0}},on:{"page-change":e.thePageChange},scopedSlots:e._u([{key:"handle",fn:function(t){var i=t.row;return[a("Button",{attrs:{type:"primary",disabled:e.disabled_btn},on:{click:function(t){return e.cellClickEvent(i)}}},[e._v("操作")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:e.disabled_btn},on:{click:function(t){return e.seeBli(i)}}},[e._v("病例")])]}},{key:"tools",fn:function(){return[a("i",{attrs:{title:"普通搜索"}},[a("Icon",{staticStyle:{"margin-top":"3px",cursor:"pointer"},attrs:{type:"ios-search",size:"25"},on:{click:e.showSearch}})],1)]},proxy:!0}],null,!1,2484394979)}):e._e(),a("vxe-modal",{attrs:{"esc-closable":"",width:"50%",title:"转诊申请",mask:!0,"lock-view":!1},model:{value:e.showDetails,callback:function(t){e.showDetails=t},expression:"showDetails"}},[a("Card",{staticStyle:{width:"90%",margin:"0 auto"}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-film-outline"}}),e._v(" 患者详情 ")],1),a("ul",{staticClass:"detail_list"},[a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("姓名："+e._s(e.detailData["name"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("性别："+e._s(e.detailData["gender"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("身份证："+e._s(e.detailData["idnum"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("联系方式："+e._s(e.detailData["mobile"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("出生日期："+e._s(e.detailData["birthday"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("医院名称："+e._s(e.detailData["hospital_name"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("创建时间："+e._s(e.detailData["createtime_text"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("患者类型："+e._s(e.detailData["patient_type"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("病情摘要："+e._s(e.detailData["remark"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("目前状态："+e._s(e.detailData["status_text"]||"暂无"))])],1),a("li",[a("Icon",{attrs:{type:"md-star",size:"20"}}),a("span",[e._v("备注："+e._s(e.detailData["content"]||"暂无"))])],1)]),a("div",{staticStyle:{"margin-top":"30px"}},[a("Button",{attrs:{type:"primary",disabled:e.disabled_btn},on:{click:function(t){return e.handle_fz(e.detailData,"agree")}}},[e._v("同意")]),a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning",disabled:e.disabled_btn},on:{click:function(t){return e.handle_fz(e.detailData,"rejext")}}},[e._v("拒绝")])],1)])],1),a("Modal",{attrs:{title:"拒绝原因（可不写直接确定）","class-name":"vertical-center-modal"},on:{"on-ok":e.reject_fz,"on-cancel":e.Cancel_reject},model:{value:e.showReject,callback:function(t){e.showReject=t},expression:"showReject"}},[a("Input",{attrs:{placeholder:"请填写拒绝原因"},model:{value:e.reject_reason,callback:function(t){e.reject_reason=t},expression:"reject_reason"}})],1),a("Modal",{attrs:{title:"同意","class-name":"vertical-center-modal"},on:{"on-ok":e.agree_fz,"on-cancel":e.Cancel_reject},model:{value:e.showAgree,callback:function(t){e.showAgree=t},expression:"showAgree"}},[a("Input",{attrs:{autosize:{minRows:2,maxRows:6},rows:4,type:"textarea"},model:{value:e.agree_reason,callback:function(t){e.agree_reason=t},expression:"agree_reason"}})],1),a("vxe-modal",{attrs:{"esc-closable":"",width:"99%",title:"病例信息",mask:!1,"lock-view":!1,fullscreen:""},model:{value:e.showBingli,callback:function(t){e.showBingli=t},expression:"showBingli"}},[e.showBingli?a("modal",{attrs:{ParentClass:e.bllist,data:e.detailData}}):e._e()],1)],1)},n=[],r=(a("b0c0"),a("b64b"),a("d3b7"),a("4ae1"),a("25f0"),a("d4ec")),s=a("bee2"),l=a("262e"),o=a("99de"),c=a("7e84"),d=a("9ab4"),u=a("60a3"),p=a("e368"),f=a("54e4"),h=a("0613"),m=(a("caad"),!0),g=function(e){var t=e.column;return!["nickname","role"].includes(t.property)},b={},y={pageSize:15,pageSizes:[5,15,20,50,100,200,500,1e3]},_={data:{name:"",sex:""},title:"查询",titleWidth:100,titleAlign:"right",items:[{span:8,folding:m,field:"name",title:"患者姓名",itemRender:{name:"input",attrs:{placeholder:"请输入患者姓名"}}},{span:8,folding:m,field:"gender",title:"性别",itemRender:{name:"input",attrs:{placeholder:"请输入性别"}}},{span:8,folding:m,field:"idnum",title:"身份证",itemRender:{name:"input",attrs:{placeholder:"请输入身份证"}}},{span:8,folding:m,field:"birthday",title:"出生日期",itemRender:{name:"formDate",props:{type:"date",format:"yyyy/MM/dd"}}},{span:8,folding:m,field:"createtime",title:"转诊时间",itemRender:{name:"formDate",props:{type:"date",format:"yyyy/MM/dd"}}},{span:8,folding:m,field:"mobile",title:"电话",itemRender:{name:"input",attrs:{placeholder:"请输入电话"}}},{span:8,folding:m,field:"address",title:"住址",itemRender:{name:"input",attrs:{placeholder:"请输入住址"}}},{span:8,folding:m,field:"hospital_name",title:"医院名称",itemRender:{name:"input",attrs:{placeholder:"请输入医院名称"}}},{span:8,folding:m,field:"patient_type",title:"患者类型",itemRender:{name:"input",attrs:{placeholder:"请输入患者类型"}}},{span:8,folding:m,field:"remark",title:"病情摘要",itemRender:{name:"input",attrs:{placeholder:"请输入病情摘要"}}},{span:8,folding:m,field:"status_text",title:"目前状态",itemRender:{name:"input",attrs:{placeholder:"请输入目前状态"}}},{span:8,folding:m,field:"content",title:"备注",itemRender:{name:"input",attrs:{placeholder:"请输入备注"}}},{span:12,align:"right",itemRender:{name:"input",attrs:{type:"submit",value:"查询"}}},{span:12,align:"left",collapseNode:!0,itemRender:{name:"input",attrs:{type:"reset",value:"重置"}}}]},v={id:"full_edit_1",buttons:[],refresh:!0,import:!0,export:!0,zoom:!0,resizable:{storage:!0},custom:{storage:!0,checkMethod:g}},w=a("712e"),k=a("e2d6");function R(e){var t=x();return function(){var a,i=Object(c["a"])(e);if(t){var n=Object(c["a"])(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return Object(o["a"])(this,a)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=function(e){Object(l["a"])(a,e);var t=R(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.modal_title="基本信息",e.showTable=!0,e.tablePage=y,e.tableToolbar=v,e.tableForm={},e.tableProxy=Object(w["a"])(f["a"]),e.tableColumn=[{field:"func_btns",title:"操作",minWidth:"170",slots:{default:"handle"}},{field:"name",title:"患者姓名",minWidth:100,editRender:{name:"input"}},{field:"gender",title:"性别",minWidth:60,editRender:{name:"input"}},{field:"idnum",title:"身份证",minWidth:165,editRender:{name:"input"}},{field:"birthday",title:"出生日期",minWidth:95,editRender:{name:"input"}},{field:"mobile",title:"电话",minWidth:110,editRender:{name:"input"}},{field:"address",title:"住址",minWidth:250,editRender:{name:"input"}},{field:"hospital_name",title:"医院名称",minWidth:130,editRender:{name:"input"}},{field:"patient_type",title:"患者类型",minWidth:80,editRender:{name:"input"}},{field:"remark",title:"病情摘要",minWidth:200,editRender:{name:"input"}},{field:"status_text",title:"目前状态",minWidth:130,editRender:{name:"input"}},{field:"createtime_text",title:"转诊时间",minWidth:170,editRender:{name:"input"}},{field:"content",title:"备注",minWidth:150,editRender:{name:"input"}}],e.validRules=b,e.bllist="bllist",e.showBingli=!1,e.loading=!1,e.curpage=0,e.pagesizes=15,e.curpages=0,e.refreshIswitch=!0,e.showReject=!1,e.reject_reason="",e.agree_reason="",e.id="",e.disabled_btn=!1,e.showAgree=!1,e.showDetails=!1,e.detailData=[],e}return Object(s["a"])(a,[{key:"thePageChange",value:function(e){var t=e.currentPage,a=e.pageSize;this.curpages=0==t?15:(t-1)*a,this.pagesizes=a}},{key:"refreshTable",value:function(){var e=this;p["a"].loading("列表刷新中",9999),Object(f["a"])(this.curpages,this.pagesizes).then((function(t){e.refreshIswitch=!1,p["a"].destory(),e.$refs.xGrid.loadData(t["data"]["rows"]),e.refreshIswitch=!0,p["a"].suc("列表刷新成功",2)})).catch((function(t){e.refreshIswitch=!0,p["a"].error("列表刷新失败，请尝试手动刷新",2)}))}},{key:"test",value:function(){this.refreshTable()}},{key:"handle_fz",value:function(e,t){var a=e.id;this.id=a,this.disabled_btn=!0,p["a"].loading("正在处理,请稍后",9999),"agree"==t?(p["a"].destory(),this.showAgree=!0,this.agree_reason="\n      您好，我院已经接收 ".concat(this.detailData["name"]||"暂无"," 患者转诊。\n                                                                          中心医院\n                                                                          姓名\n                                                                          2020年x月xx日 xx:xx\n    ")):(p["a"].destory(),this.showReject=!0)}},{key:"reject_fz",value:function(){var e=this;p["a"].loading("正在处理,请稍后",9999),this.showReject=!0,Object(f["b"])(this.id,"no",this.reject_reason).then((function(t){p["a"].destory(),e.showReject=!1,1===t.data.code?p["a"].suc(t.data.msg+",请等待列表刷新",2,(function(){document.querySelector("#btn").click(),e.disabled_btn=!1})):p["a"].error(t.data.msg+",请等待列表刷新",2,(function(){document.querySelector("#btn").click(),e.disabled_btn=!1}))})).catch((function(t){p["a"].error(t,2,(function(){e.showReject=!1,e.disabled_btn=!1}))}))}},{key:"agree_fz",value:function(){var e=this;p["a"].loading("正在处理,请稍后",9999),this.showReject=!0,Object(f["b"])(this.id,"yes",this.agree_reason).then((function(t){p["a"].destory(),e.showReject=!1,1===t.data.code?p["a"].suc(t.data.msg+",请等待列表刷新",2,(function(){document.querySelector("#btn").click(),e.disabled_btn=!1})):p["a"].error(t.data.msg+",请等待列表刷新",2,(function(){document.querySelector("#btn").click(),e.disabled_btn=!1}))})).catch((function(t){p["a"].error(t,2,(function(){e.showReject=!1,e.disabled_btn=!1}))}))}},{key:"Cancel_reject",value:function(){this.disabled_btn=!1,this.showDetails=!1}},{key:"showSearch",value:function(){var e=Object.keys(this.tableForm);0===e.length?this.tableForm=_:this.tableForm={}}},{key:"cellClickEvent",value:function(e){this.detailData=e,this.showDetails=!0}},{key:"seeBli",value:function(e){this.detailData=e,this.showBingli=!0}},{key:"created",value:function(){}},{key:"Height",get:function(){return h["a"].getters.getHeight}}]),a}(u["c"]);j=d["a"]([Object(u["a"])({components:{modal:k["a"]}})],j);var z=j,D=z,S=(a("8206"),a("2877")),I=Object(S["a"])(D,i,n,!1,null,null,null);t["default"]=I.exports},"54e4":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));a("4160"),a("fb6a"),a("159b");var i=a("0628");function n(e){var t="?";return e.forEach((function(e){for(var a in e)t+=a+"="+e[a]+"&"})),t.slice(0,t.length-1)}var r=function(e,t,a,r,s,l){var o=JSON.stringify(a),c=JSON.stringify(r),d=n([{offset:e,limit:t,filter:o||JSON.stringify({}),op:c||JSON.stringify({}),sort:"createtime",order:"desc"}]);return i["a"].get("/center/getLowerReportList"+d)},s=function(e,t,a){return i["a"].post("/center/getReportHandle",{id:e,type:t,content:a})},l=function(e,t,a,n,r){return i["a"].post("/center/getReferralRecord",{page:e,page_size:t,start_time:a,end_time:n,status:r})}},"712e":function(e,t,a){"use strict";a("4160"),a("a15b"),a("d3b7"),a("159b"),a("ddb0");var i=function(e,t){return{seq:!0,filter:!0,form:!0,sort:!0,props:{result:t?"data.data.data":"data.rows",total:t?"data.data.count":"data.total"},ajax:{query:function(a){var i=a.page,n=a.sort,r=a.filters,s=a.form,l=Object.assign({},s);r.forEach((function(e){e.column;var t=e.property,a=e.values;l[t]=a.join(",")}));var o=0;1!==i.currentPage&&(o=(i.currentPage-1)*i.pageSize);var c=n.property||"",d=n.order||"",u={};for(var p in l)l[p]&&(u[p]=l[p]);localStorage.getItem("hospital_code")&&(u["hospital_code"]=localStorage.getItem("hospital_code"));var f={};for(var h in l)l[h]&&(f[h]="=");return new Promise((function(a,n){t?e(i.currentPage,i.pageSize).then((function(e){200===e.status?a(e):n(e)})):e(o,i.pageSize,u,f,c,d).then((function(e){200===e.status?a(e):n(e)}))}))}}}};t["a"]=i},8206:function(e,t,a){"use strict";var i=a("97b4"),n=a.n(i);n.a},"97b4":function(e,t,a){}}]);